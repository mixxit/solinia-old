FILE(GLOB SRC *.cpp *.h)

IF(NOT WIN32)
  ADD_LIBRARY(nellogic SHARED ${SRC})
ELSE(NOT WIN32)
  ADD_LIBRARY(nellogic STATIC ${SRC})
ENDIF(NOT WIN32)

INCLUDE_DIRECTORIES(${LIBXML2_INCLUDE_DIR})
TARGET_LINK_LIBRARIES(nellogic ${LIBXML2_LIBRARIES} nelmisc nelnet)
SET_TARGET_PROPERTIES(nellogic PROPERTIES 
  VERSION ${NL_VERSION}   
  PROJECT_LABEL "Library: NeL Logic")

IF(WIN32)
  SET_TARGET_PROPERTIES(nellogic PROPERTIES 
    LINK_FLAGS "/NODEFAULTLIB:libcmt"
    DEBUG_POSTFIX "_d"
    RELEASE_POSTFIX "_r")
ENDIF(WIN32)

ADD_DEFINITIONS(${LIBXML2_DEFINITIONS})

INSTALL(TARGETS nellogic LIBRARY DESTINATION lib ARCHIVE DESTINATION lib COMPONENT libraries)
